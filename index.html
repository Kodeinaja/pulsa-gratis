<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Struk Jaya Sentosa Digital - 80mm</title>

<style>
body {
  font-family: monospace;
  background: #eee;
  padding: 10px;
}

.container {
  width: 48ch; /* THERMAL 80mm */
  background: #fff;
  padding: 12px;
  margin: auto;
}

.center { text-align: center; }
.bold { font-weight: bold; }

.line {
  border-top: 1px dashed #000;
  margin: 8px 0;
}

.row {
  display: grid;
  grid-template-columns: 12ch 1ch auto;
}

input, button {
  width: 100%;
  margin-top: 6px;
  padding: 6px;
  font-family: monospace;
}

button {
  font-weight: bold;
}

@media print {
  input, button { display: none; }
  body { background: white; }
}
</style>
</head>

<body>

<div class="container">

<!-- INPUT -->
<input id="produk" placeholder="Produk (contoh: XL Kuota Games + Utama 3GB 30 Hari)">
<input id="nomor" placeholder="Nomor Tujuan">
<input id="total" placeholder="Total Bayar (contoh: 22500)">
<button onclick="proses()">CETAK & KIRIM WA</button>

<div class="line"></div>

<!-- STRUK -->
<div id="struk" style="display:none">

<div class="center bold">JAYA SENTOSA DIGITAL</div>
<div class="center">Fotocopy Jaya Sentosa Digital</div>
<div class="center">Jl. Jokotole Omben Sampang</div>
<div class="center">Telp: 081936425733</div>

<div class="line"></div>

<div class="center bold">STRUK PEMBAYARAN</div>

<div class="row">
  <span>Tanggal</span><span>:</span><span id="tgl"></span>
</div>
<div class="row">
  <span>Admin</span><span>:</span><span>M. Sahal Failasuf</span>
</div>

<div class="line"></div>

<div class="row">
  <span>Produk</span><span>:</span><span id="outProduk"></span>
</div>

<div class="row">
  <span>No Tujuan</span><span>:</span><span id="outNomor"></span>
</div>

<div class="line"></div>

<div class="row bold">
  <span>Total</span><span>:</span><span id="outTotal"></span>
</div>

<div class="line"></div>

<div class="center">Simpan struk ini sebagai</div>
<div class="center">bukti pembayaran yang sah</div>

</div>
</div>

<script>
function proses() {
  const produk = document.getElementById("produk").value;
  const nomor = document.getElementById("nomor").value;
  const total = document.getElementById("total").value;

  const now = new Date();
  const tanggal = now.toLocaleDateString('id-ID') + " " + now.toLocaleTimeString('id-ID');

  document.getElementById("tgl").innerText = tanggal;
  document.getElementById("outProduk").innerText = produk;
  document.getElementById("outNomor").innerText = nomor;
  document.getElementById("outTotal").innerText = "Rp " + total;

  document.getElementById("struk").style.display = "block";

  // AUTO PRINT
  window.print();

  // AUTO WHATSAPP
  const pesan =
`JAYA SENTOSA DIGITAL
Jl. Jokotole Omben Sampang

STRUK PEMBAYARAN
Tanggal : ${tanggal}
Produk  : ${produk}
No Tujuan : ${nomor}
Total   : Rp ${total}

Terima kasih üôè`;

  const wa = "https://wa.me/62" + nomor.substring(1) +
             "?text=" + encodeURIComponent(pesan);
  window.open(wa, "_blank");
}
</script>

</body>
</html>
